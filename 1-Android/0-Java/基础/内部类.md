> version：2021/10/24
>
> review：



目录

[TOC]

# 什么是内部类？内部类的作用

内部类指在类的内部再定义另一个类。

 

内部类的作用：

1）实现多重继承，因为java中类的继承只能单继承，使用内部类可达到多重继承；2）内部类可以很好的实现隐藏，一般非内部类，不允许有private或protected权限的，但内部类可以；3）减少了类文件编译后产生的字节码文件大小；

内部类在编译完后也会产生.class文件，但文件名称是：外部类名称$内部类名称.class。

分为以下几种：

 1）成员内部类，作为外部类的一个成员存在，与外部类的属性、方法并列，成员内部类持有外部类的引用，成员内部类不能定义static变量和方法。应用场合：每一个外部类都需要一个内部类实例，内部类离不开外部类存在。

 2）静态内部类，内部类以static声明，其他类可通过外部类.内部类来访问。特点：不会持有外部类的引用，可以访问外部类的静态变量，若要访问成员变量须通过外部类的实例访问。应用场合：内部类不需要外部类的实例，仅为外部类提供或逻辑上属于外部类，逻辑上可单独存在。设计的意义：加强了类的封装性（静态内部类是外部类的子行为或子属性，两者保持着一定关系），提高了代码的可读性（相关联的代码放在一起）。

3）匿名内部类，在整个操作中只使用一次，没有名字，使用new创建，没有具体位置。

4）局部内部类，在方法内或是代码块中定义类



内部类可以访问外部类的private属性。



#### 匿名内部类

使用静态内部类/匿名类，不要使用非静态内部类/匿名类。**非静态内部类/匿名类会隐式的持有外部类的引用**，外部类就有可能发生泄漏。而静态内部类/匿名类不会隐式的持有外部类引用，外部类会以正常的方式回收，如果你想在静态内部类/匿名类中使用外部类的属性或方法时，可以显示的持有一个弱引用。



# 相关问题

<font color='orange'>Q：内部类为什么可以访问到外部类？</font>

持有外部类的引用，这个引用是在什么什么时候持有的（JAVA对象的创建过程相关）

创建内部类时，会通过内部类的构造方法，将外部类传入内部类中。

[内部类访问外部类属性](https://www.cnblogs.com/datamining-bio/p/13870270.html)

<font color='orange'>Q：匿名内部类是否可以extends其他类?是否可以implement interface(接口)</font>

匿名内部类在实现时必须借助一个借口或者一个抽象类或者一个普通类来构造，从这过层次上讲匿名内部类是实现了接口或者继承了类，但是不能通过extends或implement关键词来继承类或实现接口。

<font color='orange'>Q：内部类持有外部类引用的原理是什么</font>

是在编译的时候javac通过构造方法将外部类引用传到内部类中的。

<font color='orange'>Q：内部类会有内存泄漏问题吗？</font>

会存在。因为内部类会持有外部类的引用，当内部类的生命周期大于外部类的生命周期时，外部类就会出现泄漏。比如在Activity中定义一个实现Runnable接口的类，这个类会持有Activity，然后当这个类在子线程中执行的时候，Activity可能就被销毁了，但因为runnable在持有它，所以就会导致泄漏。

<font color='orange'>Q：内部类为什么能访问外部类的变量，为什么还能访问外部类的私有变量。</font>

首先内部类中可以访问外部类的变量是因为持有了外部类的引用，内部类编译后生成一个static access方法，来间接调用外部类的private变量，因为已经持有外部类引用了，所以可以调用到private变量。

[为什么内部类的private变量可被外部类直接访问？](https://www.zhihu.com/question/54730071)

<font color='orange'>Q：</font>



<font color='orange'>Q：</font>



# 总结

1、

## 【精益求精】我还能做（补充）些什么？

1、



# 参考

