> version：2021/10/24
>
> review：



目录

[TOC]



- static 关键字修饰的方法或者变量可以直接通过类名访问。
- 不能直接使用对象实例访问静态方法和静态变量。见例1。
- 静态变量被所有的对象所共享，在内存中仅有一个副本，当且仅当类初次加载时会被初始化。
- 能通过this访问静态变量吗？所有的静态方法和静态变量都可以通过对象访问。（只要权限足够）
- static不能用来修饰局部变量。



例1：

```java
public class A {
    public static int x = 0;

    public void m2() {
        x = 3;
        m1();
    }

    public static void m1() {
        System.out.println("sss");
    }
}
```

不能通过对象直接访问（调用） x 和 m1 。



# 相关问题

<font color='orange'>Q：static编译时有啥不同,static语句块,static变量,static方法,构造初始化顺序(静态绑定)</font>

静态变量，static代码块，static方法，然后初始化非静态的。

> 这个问题很多细节还没有掌握。

<font color='orange'>Q：static方法可以被覆盖吗？为什么？</font>

不可以。static方法是属于类的，从概念上讲，覆盖是为了在多态中进行动态的调用，属于动态绑定，但是static在静态绑定时就与所属的类关联起来了，父类引用调用static方法，即使对象实际是子类的，子类也有相同方法，但是实际调用的也是父类中的，不存在多态的情况。

<font color='orange'>Q：private和static修饰的方法可以重写吗；</font>

都不能重写。

<font color='orange'>Q：</font>



# 前言

- 在`Java`中，静态 `Static`关键字使用十分常见
- 本文全面 & 详细解析静态 `Static`关键字，希望你们会喜欢

------

# 目录

![img](https://upload-images.jianshu.io/upload_images/944365-f289f7b646e48681.png?imageMogr2/auto-orient/strip|imageView2/2/w/502/format/webp)

示意图

------

# 1. 定义

一种 表示**静态属性**的 关键字 / 修饰符

------

# 2. 作用

共用、共享

> 能有此作用的原因分析：
>
> 1. Java中，任何变量 / 代码存储时，都是 在编译时 由系统自动分配内存
> 2. 在静态变量编译后，所分配的内存会一直存在，直到程序退出内存才会释放这个空间
> 3. 类加载时，`JVM`会把静态变量放到 **方法区**，被本类 & 本类的所有实例所共用

------

# 3. 具体使用

- `Static`静态修饰符可应用于：类、代码块、方法 & 变量
- 下面，我将详细分析

### 3.1 静态类

- 定义
  使用 `Static`关键字 修饰、定义 为 静态的 内部类

> 即：
>
> 1. 静态类又名为：静态内部类
> 2. 该类独立存在，形式上与外部类有内外关系，实际上则没有，本质是为了隐藏自身

- 具体使用 & 相关规则



```dart
/**
 * 1. 静态类的方法 = 静态 / 非静态
 *    (静态方法可在外层通过静态类调用，而非静态方法必须要创建类的对象后才能调用)
 * 2. 只能引用外部类的静态变量（static，即类变量）
 * 3. 注：
 *       a. 默认不持有外部类引用、使用不依赖于外部类（与外层类无绑定）：即使无创建外层类的对象，它一样存在
 *       b. 若一个内部类不是被定义成静态内部类，那么其成员变量 / 方法不能被定义成静态
 *       c. 静态内部类 & 非静态内部类在创建时有区别，下面会详细说明
 */

// 外部类
public class A {  
    // 静态内部类
    public static class B{  
    }  
    // 非静态内部类（即 普通）
    class C{  
    }  
}  

// 静态内部类b & 非静态内部类c 创建时的区别：
A a=new A(); 
A.B b=new A.B(); 
A.C c=a.new C();
```

- 静态内部类 与 内部类的区别

![img](https://upload-images.jianshu.io/upload_images/944365-a2f99e822708f79f.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp)

示意图

- 特别注意
  a. 加载一个类时，其内部类不会同时被加载。
  b. 一个类被加载时刻 = 当且仅当其某个静态成员被调用时（静态域、构造器、静态方法等）

### 3.2 静态代码块

- 定义
  类加载器加载类的最后1步（类初始化）时，执行类构造器`<clinit>()`里需执行的一组语句

> 额外说明
>
> 1. 类初始化 = 真正开始执行类中定义`Java`程序代码 = 执行类构造器`<clinit>()`
> 2. `<clinit>()` = 由编译器自动收集类中所有类变量的赋值动作&静态语句块中的语句合并产生的
> 3. 与类构造函数（即实例构造器`<init>()`）不同，`<clinit>()`不需显式地调用父类构造器，虚拟机会保证子类的`<clinit>()`执行前，父类的`<clinit>()`已执行完毕

- 具体使用 & 相关规则



```dart
/**
 * 1. 代码块 使用 Static修饰
 * 2. 静态块只会在类加载到内存中时执行1次
 *    a. 若有多个static代码块，JVM将按照它们在类中出现的先后顺序依次执行
 *    b. 静态语句块中只能访问定义在静态语句块之前的变量，定义在它之后的变量可以赋值，但不能访问。如下实例所示
 */

 public class Test { 

     // 使用静态修饰的静态代码块
     static{ 
         i=0;  // 給变量赋值，可通过编译 
         System.out.print(i); // 非法， 提示：“非法向前引用” 
     } 

     static int i=1; 
  
 }
```

### 3.3 静态方法

- 定义
  使用 `Static`关键字 修饰、定义为静态的成员方法

> 也称：**类方法**

- 具体使用 & 相关规则



```dart
/**
 * 1. 可直接通过类名调用，也可通过对象实例调用
 *    （属于类，不属于实例）
 * 2. 任何的实例都可调用（方便共享、公用）
 * 3. 只能访问所属类的静态成员变量 & 方法、不能使用this、super关键字
 *   （this = 调用该函数的对象、但由于静态方法可以直接使用类名调用（即可能还没创建对象），所以不可使用this）
 */

// 静态方法的申明
public static void a(int param) {

}
```

### 3.4 静态变量

- 定义
  使用 `Static`关键字 修饰、定义为静态的成员变量

> 也称：类变量

- 具体使用 & 相关规则



```dart
/**
 * 1. 静态变量在内存中只有1个拷贝：JVM只为静态分配1次内存
 *   a. 全部对象共用这个static关键字修饰的成员变量，方便对象间共享，节省内存
 *   b. 未被Static修饰的成员变量 = 实例变量：每创建1个实例，JVM就会为实例变量分配1次内存，实例变量在内存中可以有多个拷贝（但互相不影响，更加灵活）
 * 2. 可用类名直接访问：在加载类的过程中完成静态变量的内存分配，（也可通过对象实例访问）
 *  （属于类，不属于实例）
 * 3. 非线程安全：因静态变量被类的所有实例共用
 * 4. 局部变量也能被声明为static
 */

// 静态方法的申明
public class A {  

    private static int count = 0;  //静态变量的申明
   
}  
```

- 静态变量与实例变量的区别

![img](https://upload-images.jianshu.io/upload_images/944365-812d65cbdd0c69e0.png?imageMogr2/auto-orient/strip|imageView2/2/w/900/format/webp)

示意图

至此，关于`Java`中的静态 `Static`关键字讲解完毕。

------

# 4. 总结

本文主要讲解了`Java`中的静态 `Static`关键字，总结如下：

![img](https://upload-images.jianshu.io/upload_images/944365-186e4c87508e8bf6.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp)

示意图



# 参考

[Carson带你学Java：3分钟带你全面了解Static静态关键字](https://www.jianshu.com/p/4c1950f3d934)
